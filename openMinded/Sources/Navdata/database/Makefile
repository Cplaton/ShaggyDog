# ShaggyDogs lib_openMinded_db makefile
# version 1.0
# November 2014

CC=gcc

INC=/usr/include/postgresql/
LIB=/usr/lib/postgresql/8.4/lib/

CFLAGS=-I$(INC)
LDLIBS=-L$(LIB) -lpq


all: libopenMinded_db.so openMinded_db_test

# Compile as a dynamic library
libopenMinded_db.so:  bd_management.c 
	$(CC) -o libopenMinded_db.so -c -shared bd_management.c $(CFLAGS) $(LDLIBS)

# Compile the test program
openMinded_db_test: testBd.c
	$(CC) -o openMinded_db_test -lopenMinded_db  -L. testBd.c $(CFLAGS) $(LDLIBS)

# Clean the files generated by this makefile (assume that no other .o or .so files are present in the current folder)
clean:
	rm *.o *.so openMinded_db_test


install:
	mv openMinded_db_test $(HOME)/bin/

# Prevent from erasing files that would be called like makefile keywords
.PHONY: clean install all


